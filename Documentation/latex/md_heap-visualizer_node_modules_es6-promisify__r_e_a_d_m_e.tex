\href{https://travis-ci.org/digitaldesignlabs/es6-promisify}{\texttt{ }}

\doxysection*{es6-\/promisify}

Converts callback-\/based functions to Promise-\/based functions.

\doxysubsection*{Install}

Install with \href{https://npmjs.org/package/es6-promisify}{\texttt{ npm}}


\begin{DoxyCode}{0}
\DoxyCodeLine{npm install -\/-\/save es6-\/promisify}
\end{DoxyCode}


\doxysubsection*{Example}


\begin{DoxyCode}{0}
\DoxyCodeLine{"use strict";}
\DoxyCodeLine{}
\DoxyCodeLine{// Declare variables}
\DoxyCodeLine{const promisify = require("es6-\/promisify");}
\DoxyCodeLine{const fs = require("fs");}
\DoxyCodeLine{}
\DoxyCodeLine{// Convert the stat function}
\DoxyCodeLine{const stat = promisify(fs.stat);}
\DoxyCodeLine{}
\DoxyCodeLine{// Now usable as a promise!}
\DoxyCodeLine{stat("example.txt").then(function (stats) \{}
\DoxyCodeLine{    console.log("Got stats", stats);}
\DoxyCodeLine{\}).catch(function (err) \{}
\DoxyCodeLine{    console.error("Yikes!", err);}
\DoxyCodeLine{\});}
\end{DoxyCode}


\doxysubsection*{Promisify methods}


\begin{DoxyCode}{0}
\DoxyCodeLine{"use strict";}
\DoxyCodeLine{}
\DoxyCodeLine{// Declare variables}
\DoxyCodeLine{const promisify = require("es6-\/promisify");}
\DoxyCodeLine{const redis = require("redis").createClient(6379, "localhost");}
\DoxyCodeLine{}
\DoxyCodeLine{// Create a promise-\/based version of send\_command}
\DoxyCodeLine{const client = promisify(redis.send\_command, redis);}
\DoxyCodeLine{}
\DoxyCodeLine{// Send commands to redis and get a promise back}
\DoxyCodeLine{client("ping").then(function (pong) \{}
\DoxyCodeLine{    console.log("Got", pong);}
\DoxyCodeLine{\}).catch(function (err) \{}
\DoxyCodeLine{    console.error("Unexpected error", err);}
\DoxyCodeLine{\}).then(function () \{}
\DoxyCodeLine{    redis.quit();}
\DoxyCodeLine{\});}
\end{DoxyCode}


\doxysubsection*{Handle callback multiple arguments}


\begin{DoxyCode}{0}
\DoxyCodeLine{"use strict";}
\DoxyCodeLine{}
\DoxyCodeLine{// Declare functions}
\DoxyCodeLine{function test(cb) \{}
\DoxyCodeLine{    return cb(undefined, 1, 2, 3);}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{// Declare variables}
\DoxyCodeLine{const promisify = require("es6-\/promisify");}
\DoxyCodeLine{}
\DoxyCodeLine{// Create promise-\/based version of test}
\DoxyCodeLine{const single = promisify(test);}
\DoxyCodeLine{const multi = promisify(test, \{multiArgs: true\});}
\DoxyCodeLine{}
\DoxyCodeLine{// Discards additional arguments}
\DoxyCodeLine{single().then(function (result) \{}
\DoxyCodeLine{    console.log(result); // 1}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{// Returns all arguments as an array}
\DoxyCodeLine{multi().then(function (result) \{}
\DoxyCodeLine{    console.log(result); // [1, 2, 3]}
\DoxyCodeLine{\});}
\end{DoxyCode}


\doxysubsubsection*{Tests}

Test with nodeunit 
\begin{DoxyCode}{0}
\DoxyCodeLine{\$ npm test}
\end{DoxyCode}


Published under the \href{http://opensource.org/licenses/MIT}{\texttt{ M\+IT License}}. 