Take a nested Javascript object and flatten it, or unflatten an object with delimited keys.

\doxysection*{Installation}


\begin{DoxyCode}{0}
\DoxyCodeLine{\$ npm install flat}
\end{DoxyCode}


\doxysection*{Methods}

\doxysubsection*{flatten(original, options)}

Flattens the object -\/ it\textquotesingle{}ll return an object one level deep, regardless of how nested the original object was\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{var flatten = require('flat')}
\DoxyCodeLine{}
\DoxyCodeLine{flatten(\{}
\DoxyCodeLine{    key1: \{}
\DoxyCodeLine{        keyA: 'valueI'}
\DoxyCodeLine{    \},}
\DoxyCodeLine{    key2: \{}
\DoxyCodeLine{        keyB: 'valueII'}
\DoxyCodeLine{    \},}
\DoxyCodeLine{    key3: \{ a: \{ b: \{ c: 2 \} \} \}}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{// \{}
\DoxyCodeLine{//   'key1.keyA': 'valueI',}
\DoxyCodeLine{//   'key2.keyB': 'valueII',}
\DoxyCodeLine{//   'key3.a.b.c': 2}
\DoxyCodeLine{// \}}
\end{DoxyCode}


\doxysubsection*{unflatten(original, options)}

Flattening is reversible too, you can call {\ttfamily flatten.\+unflatten()} on an object\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{var unflatten = require('flat').unflatten}
\DoxyCodeLine{}
\DoxyCodeLine{unflatten(\{}
\DoxyCodeLine{    'three.levels.deep': 42,}
\DoxyCodeLine{    'three.levels': \{}
\DoxyCodeLine{        nested: true}
\DoxyCodeLine{    \}}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{// \{}
\DoxyCodeLine{//     three: \{}
\DoxyCodeLine{//         levels: \{}
\DoxyCodeLine{//             deep: 42,}
\DoxyCodeLine{//             nested: true}
\DoxyCodeLine{//         \}}
\DoxyCodeLine{//     \}}
\DoxyCodeLine{// \}}
\end{DoxyCode}


\doxysection*{Options}

\doxysubsection*{delimiter}

Use a custom delimiter for (un)flattening your objects, instead of {\ttfamily .}.

\doxysubsection*{safe}

When enabled, both {\ttfamily flat} and {\ttfamily unflatten} will preserve arrays and their contents. This is disabled by default.


\begin{DoxyCode}{0}
\DoxyCodeLine{var flatten = require('flat')}
\DoxyCodeLine{}
\DoxyCodeLine{flatten(\{}
\DoxyCodeLine{    this: [}
\DoxyCodeLine{        \{ contains: 'arrays' \},}
\DoxyCodeLine{        \{ preserving: \{}
\DoxyCodeLine{              them: 'for you'}
\DoxyCodeLine{        \}\}}
\DoxyCodeLine{    ]}
\DoxyCodeLine{\}, \{}
\DoxyCodeLine{    safe: true}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{// \{}
\DoxyCodeLine{//     'this': [}
\DoxyCodeLine{//         \{ contains: 'arrays' \},}
\DoxyCodeLine{//         \{ preserving: \{}
\DoxyCodeLine{//             them: 'for you'}
\DoxyCodeLine{//         \}\}}
\DoxyCodeLine{//     ]}
\DoxyCodeLine{// \}}
\end{DoxyCode}


\doxysubsection*{object}

When enabled, arrays will not be created automatically when calling unflatten, like so\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{unflatten(\{}
\DoxyCodeLine{    'hello.you.0': 'ipsum',}
\DoxyCodeLine{    'hello.you.1': 'lorem',}
\DoxyCodeLine{    'hello.other.world': 'foo'}
\DoxyCodeLine{\}, \{ object: true \})}
\DoxyCodeLine{}
\DoxyCodeLine{// hello: \{}
\DoxyCodeLine{//     you: \{}
\DoxyCodeLine{//         0: 'ipsum',}
\DoxyCodeLine{//         1: 'lorem',}
\DoxyCodeLine{//     \},}
\DoxyCodeLine{//     other: \{ world: 'foo' \}}
\DoxyCodeLine{// \}}
\end{DoxyCode}


\doxysubsection*{overwrite}

When enabled, existing keys in the unflattened object may be overwritten if they cannot hold a newly encountered nested value\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{unflatten(\{}
\DoxyCodeLine{    'TRAVIS': 'true',}
\DoxyCodeLine{    'TRAVIS\_DIR': '/home/travis/build/kvz/environmental'}
\DoxyCodeLine{\}, \{ overwrite: true \})}
\DoxyCodeLine{}
\DoxyCodeLine{// TRAVIS: \{}
\DoxyCodeLine{//     DIR: '/home/travis/build/kvz/environmental'}
\DoxyCodeLine{// \}}
\end{DoxyCode}


Without {\ttfamily overwrite} set to {\ttfamily true}, the {\ttfamily T\+R\+A\+V\+IS} key would already have been set to a string, thus could not accept the nested {\ttfamily D\+IR} element.

This only makes sense on ordered arrays, and since we\textquotesingle{}re overwriting data, should be used with care.

\doxysubsection*{max\+Depth}

Maximum number of nested objects to flatten.


\begin{DoxyCode}{0}
\DoxyCodeLine{var flatten = require('flat')}
\DoxyCodeLine{}
\DoxyCodeLine{flatten(\{}
\DoxyCodeLine{    key1: \{}
\DoxyCodeLine{        keyA: 'valueI'}
\DoxyCodeLine{    \},}
\DoxyCodeLine{    key2: \{}
\DoxyCodeLine{        keyB: 'valueII'}
\DoxyCodeLine{    \},}
\DoxyCodeLine{    key3: \{ a: \{ b: \{ c: 2 \} \} \}}
\DoxyCodeLine{\}, \{ maxDepth: 2 \})}
\DoxyCodeLine{}
\DoxyCodeLine{// \{}
\DoxyCodeLine{//   'key1.keyA': 'valueI',}
\DoxyCodeLine{//   'key2.keyB': 'valueII',}
\DoxyCodeLine{//   'key3.a': \{ b: \{ c: 2 \} \}}
\DoxyCodeLine{// \}}
\end{DoxyCode}


\doxysection*{Command Line Usage}

{\ttfamily flat} is also available as a command line tool. You can run it with \href{https://ghub.io/npx}{\texttt{ {\ttfamily npx}}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{npx flat foo.json}
\end{DoxyCode}


Or install the {\ttfamily flat} command globally\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{npm i -\/g flat \&\& flat foo.json}
\end{DoxyCode}


Accepts a filename as an argument\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{flat foo.json}
\end{DoxyCode}


Also accepts J\+S\+ON on stdin\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{cat foo.json | flat}
\end{DoxyCode}
 